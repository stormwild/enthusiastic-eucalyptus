{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./server/auth.js","webpack:///./server/db/models/course-category.js","webpack:///./server/db/models/course.js","webpack:///./server/db/models/index.js","webpack:///./server/db/models/instructor.js","webpack:///./server/db/models/role.js","webpack:///./server/db/models/user.js","webpack:///./server/db/mongodb.js","webpack:///./server/db/scipts/seeder.js","webpack:///./server/graphql/apollo.js","webpack:///./server/graphql/configProvider.js","webpack:///./server/graphql/resolvers/graphQLDate.js","webpack:///./server/graphql/resolvers/index.js","webpack:///./server/graphql/resolvers/mutations/index.js","webpack:///./server/graphql/resolvers/queries/index.js","webpack:///./server/graphql/resolvers/rootValueHolder.js","webpack:///./server/graphql/schema/course.js","webpack:///./server/graphql/schema/courseCategory.js","webpack:///./server/graphql/schema/graphQLDate.js","webpack:///./server/graphql/schema/index.js","webpack:///./server/graphql/schema/instructor.js","webpack:///./server/graphql/schema/role.js","webpack:///./server/graphql/schema/root.js","webpack:///./server/graphql/schema/user.js","webpack:///./server/middleware.js","webpack:///./server/server.js","webpack:///./server/strategies/local.js","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@babel/runtime/helpers/interopRequireDefault\"","webpack:///external \"@babel/runtime/helpers/interopRequireWildcard\"","webpack:///external \"@babel/runtime/helpers/taggedTemplateLiteral\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"apollo-server-express\"","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"express-session\"","webpack:///external \"graphql\"","webpack:///external \"graphql/language\"","webpack:///external \"helmet\"","webpack:///external \"mongodb\"","webpack:///external \"mongoose\"","webpack:///external \"passport\"","webpack:///external \"passport-local-mongoose\"","webpack:///external \"path\"","webpack:///external \"readline\""],"names":["auth","app","use","passport","initialize","session","serializeUser","user","done","deserializeUser","courseCategorySchema","name","type","String","required","unique","index","CourseCategory","mongoose","model","ObjectId","Schema","Types","courseSchema","title","description","instructors","ref","fee","Number","category","Course","instructorSchema","photo","excerpt","bio","courses","Instructor","roleSchema","Role","userSchema","username","password","email","role","active","Boolean","plugin","passportLocalMongoose","User","process","platform","rl","readline","createInterface","input","stdin","output","stdout","on","emit","gracefulShutdown","msg","callback","connection","close","console","log","once","kill","pid","exit","conn","env","MONGODB_URL","connect","useNewUrlParser","useUnifiedTopology","err","initCourseCategories","countDocuments","count","collection","insertMany","courseCategoriesData","docs","insertedCount","initInstructors","instructorsData","initCourses","find","categories","coursesData","map","course","c","_id","initRoles","roleData","config","server","ApolloServer","typeDefs","typeDefsArray","resolvers","formatError","error","JSON","stringify","configProvider","graphQLDate","GraphQLScalarType","serialize","value","toISOString","parseValue","dateValue","Date","isNaN","undefined","parseLiteral","ast","kind","Kind","STRING","Query","queries","Mutation","mutations","GraphQLDate","addInstructor","_","instructor","push","addRoot","root","courseCategories","parent","args","context","info","populate","rootValueHolder","setRootValueHolder","getRootValueHolder","gql","courseCategory","middleware","SESSION_SECRET","bodyParser","json","urlencoded","extended","secret","resave","saveUninitialized","cookie","secure","helmet","contentSecurityPolicy","directives","defaultSrc","scriptSrc","styleSrc","imgSrc","fontSrc","referrerPolicy","policy","express","applyMiddleware","path","req","res","next","status","sendFile","resolve","post","authenticate","_req","redirect","body","findOne","register","_next","listen","localStrategy","createStrategy"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;;;AClFA;;AACA;;AAEA,IAAMA,IAAI,GAAG,SAAPA,IAAO,CAACC,GAAD,EAAS;AACpBA,KAAG,CAACC,GAAJ,CAAQC,qBAASC,UAAT,EAAR;AACAH,KAAG,CAACC,GAAJ,CAAQC,qBAASE,OAAT,EAAR;;AAEAF,uBAASG,aAAT,CAAuB,UAACC,IAAD,EAAOC,IAAP,EAAgB;AACrC;AACAA,QAAI,CAAC,IAAD,EAAOD,IAAP,CAAJ;AACD,GAHD;;AAIAJ,uBAASM,eAAT,CAAyB,UAACF,IAAD,EAAOC,IAAP,EAAgB;AACvCA,QAAI,CAAC,IAAD,EAAOD,IAAP,CAAJ;AACD,GAFD;;AAIA,yBAAcJ,oBAAd;AACD,CAbD;;eAeeH,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBf;;AAEO,IAAMU,oBAAoB,GAAG,sBAAO;AACzCC,MAAI,EAAE;AAAEC,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE,IAA1B;AAAgCC,UAAM,EAAE,IAAxC;AAA8CC,SAAK,EAAE;AAArD;AADmC,CAAP,CAA7B;;;AAIP,IAAMC,cAAc,GAAGC,qBAASC,KAAT,CAAe,gBAAf,EAAiCT,oBAAjC,EAAuD,kBAAvD,CAAvB;;eAEeO,c;;;;;;;;;;;;;;;;;;;;ACRf;;IAGWG,Q,GACPC,gB,CADFC,K,CAASF,Q;AAGJ,IAAMG,YAAY,GAAG,sBAAO;AACjCC,OAAK,EAAE;AAAEZ,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE;AAA1B,GAD0B;AAEjCW,aAAW,EAAEZ,MAFoB;AAGjCa,aAAW,EAAE,CAAC;AAAEd,QAAI,EAAEQ,QAAR;AAAkBO,OAAG,EAAE;AAAvB,GAAD,CAHoB;AAIjCC,KAAG,EAAEC,MAJ4B;AAKjCC,UAAQ,EAAE;AAAElB,QAAI,EAAEQ,QAAR;AAAkBO,OAAG,EAAE;AAAvB;AALuB,CAAP,CAArB;;;AAQP,IAAMI,MAAM,GAAGb,qBAASC,KAAT,CAAe,QAAf,EAAyBI,YAAzB,EAAuC,SAAvC,CAAf;;eAEeQ,M;;;;;;;;;;;;;;;;;;;AChBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;ACJA;;AACA;;AAEO,IAAMC,gBAAgB,GAAG,sBAAO;AACrCrB,MAAI,EAAE;AAAEC,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE,IAA1B;AAAgCC,UAAM,EAAE,IAAxC;AAA8CC,SAAK,EAAE;AAArD,GAD+B;AAErCiB,OAAK,EAAEpB,MAF8B;AAGrCqB,SAAO,EAAErB,MAH4B;AAIrCsB,KAAG,EAAEtB,MAJgC;AAKrCuB,SAAO,EAAE,CAAC;AAAExB,QAAI,EAAEQ,iBAAR;AAAkBO,OAAG,EAAE;AAAvB,GAAD;AAL4B,CAAP,CAAzB;;;AAQP,IAAMU,UAAU,GAAGnB,qBAASC,KAAT,CAAe,YAAf,EAA6Ba,gBAA7B,EAA+C,aAA/C,CAAnB;;eAEeK,U;;;;;;;;;;;;;;;;;;;;ACbf;;AAEO,IAAMC,UAAU,GAAG,sBAAO;AAC/B3B,MAAI,EAAE;AAAEC,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE,IAA1B;AAAgCC,UAAM,EAAE,IAAxC;AAA8CC,SAAK,EAAE;AAArD;AADyB,CAAP,CAAnB;;;AAIP,IAAMuB,IAAI,GAAGrB,qBAASC,KAAT,CAAe,MAAf,EAAuBmB,UAAvB,EAAmC,OAAnC,CAAb;;eAEeC,I;;;;;;;;;;;;;;;;;;;;;;ACRf;;AACA;;IAGWnB,Q,GACPC,gB,CADFC,K,CAASF,Q;AAGJ,IAAMoB,UAAU,GAAG,sBAAO;AAC/BC,UAAQ,EAAE;AAAE7B,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE,IAA1B;AAAgCC,UAAM,EAAE,IAAxC;AAA8CC,SAAK,EAAE;AAArD,GADqB;AAE/B0B,UAAQ,EAAE;AAAE9B,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE;AAA1B,GAFqB;AAG/B6B,OAAK,EAAE;AAAE/B,QAAI,EAAEC,MAAR;AAAgBC,YAAQ,EAAE,IAA1B;AAAgCC,UAAM,EAAE,IAAxC;AAA8CC,SAAK,EAAE;AAArD,GAHwB;AAI/B4B,MAAI,EAAE;AAAEhC,QAAI,EAAEQ,QAAR;AAAkBO,OAAG,EAAE,MAAvB;AAA+Bb,YAAQ,EAAE;AAAzC,GAJyB;AAK/B+B,QAAM,EAAE;AAAEjC,QAAI,EAAEkC,OAAR;AAAiB,eAAS;AAA1B;AALuB,CAAP,CAAnB;;AAQPN,UAAU,CAACO,MAAX,CAAkBC,iCAAlB;;AAEA,IAAMC,IAAI,GAAG/B,qBAASC,KAAT,CAAe,MAAf,EAAuBqB,UAAvB,EAAmC,OAAnC,CAAb;;eAEeS,I;;;;;;;;;;;;;;;;;ACnBf;;AACA;;AACA;;AAEA,IAAIC,OAAO,CAACC,QAAR,KAAqB,OAAzB,EAAkC;AAChC,MAAMC,EAAE,GAAGC,qBAASC,eAAT,CAAyB;AAClCC,SAAK,EAAEL,OAAO,CAACM,KADmB;AAElCC,UAAM,EAAEP,OAAO,CAACQ;AAFkB,GAAzB,CAAX;;AAIAN,IAAE,CAACO,EAAH,CAAM,QAAN,EAAgB,YAAM;AACpBT,WAAO,CAACU,IAAR,CAAa,QAAb;AACD,GAFD;AAGD;;AAED,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD,EAAMC,QAAN,EAAmB;AAC1C7C,uBAAS8C,UAAT,CAAoBC,KAApB,CAA0B,YAAM;AAC9BC,WAAO,CAACC,GAAR,yCAA6CL,GAA7C;AACAC,YAAQ;AACT,GAHD;AAID,CALD;;AAOAb,OAAO,CAACkB,IAAR,CAAa,SAAb,EAAwB,YAAM;AAC5BP,kBAAgB,CAAC,iBAAD,EAAoB,YAAM;AACxCX,WAAO,CAACmB,IAAR,CAAanB,OAAO,CAACoB,GAArB,EAA0B,SAA1B;AACD,GAFe,CAAhB;AAGD,CAJD;AAMApB,OAAO,CAACS,EAAR,CAAW,QAAX,EAAqB,YAAM;AACzBE,kBAAgB,CAAC,iBAAD,EAAoB,YAAM;AACxCX,WAAO,CAACqB,IAAR,CAAa,CAAb;AACD,GAFe,CAAhB;AAGD,CAJD;AAMArB,OAAO,CAACS,EAAR,CAAW,SAAX,EAAsB,YAAM;AAC1BE,kBAAgB,CAAC,qBAAD,EAAwB,YAAM;AAC5CX,WAAO,CAACqB,IAAR,CAAa,CAAb;AACD,GAFe,CAAhB;AAGD,CAJD;AAMA,IAAMC,IAAI,GAAGtB,OAAO,CAACuB,GAAR,CAAYC,WAAZ,IAA2B,0BAAxC;;AAEAxD,qBAASyD,OAAT,CAAiBH,IAAjB,EAAuB;AAAEI,iBAAe,EAAE,IAAnB;AAAyBC,oBAAkB,EAAE;AAA7C,CAAvB;;AAEA3D,qBAAS8C,UAAT,CAAoBL,EAApB,CAAuB,WAAvB,EAAoC;AAAA,SAAMO,OAAO,CAACC,GAAR,iCAAqCK,IAArC,EAAN;AAAA,CAApC;;AAEAtD,qBAAS8C,UAAT,CAAoBL,EAApB,CAAuB,OAAvB,EAAgC,UAAAmB,GAAG;AAAA,SAAIZ,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CW,GAA1C,CAAJ;AAAA,CAAnC;;AAEA5D,qBAAS8C,UAAT,CAAoBL,EAApB,CAAuB,cAAvB,EAAuC;AAAA,SAAMO,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAN;AAAA,CAAvC;;AAEAjD,qBAAS8C,UAAT,CAAoBI,IAApB,CAAyB,MAAzB,EAAiC,YAAM;AACrCF,SAAO,CAACC,GAAR,CAAY,wBAAZ;AAEA;AACA;AACA;AACA;AACD,CAPD,E;;;;;;;;;;;;;;;;;;;ACjDA;;AACA;;AACA;;AACA;;AACA;;AAEO,IAAMY,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACxC9D,yBAAe+D,cAAf,CAA8B,UAACF,GAAD,EAAMG,KAAN,EAAgB;AAC5C,QAAIA,KAAK,IAAI,CAAb,EAAgB;AACdhE,6BAAeiE,UAAf,CAA0BC,UAA1B,CAAqCC,4BAArC,EAA2D,UAACN,GAAD,EAAMO,IAAN;AAAA,eACzDnB,OAAO,CAACC,GAAR,+CAAmDkB,IAAI,CAACC,aAAxD,EADyD;AAAA,OAA3D;AAGD;AACF,GAND;AAOD,CARM;;;;AAUA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AACnClD,qBAAW2C,cAAX,CAA0B,UAACF,GAAD,EAAMG,KAAN,EAAgB;AACxC,QAAIA,KAAK,IAAI,CAAb,EAAgB;AACd5C,yBAAW6C,UAAX,CAAsBC,UAAtB,CAAiCK,uBAAjC,EAAkD,UAACV,GAAD,EAAMO,IAAN;AAAA,eAChDnB,OAAO,CAACC,GAAR,yCAA6CkB,IAAI,CAACC,aAAlD,EADgD;AAAA,OAAlD;AAGD;AACF,GAND;AAOD,CARM;;;;AAUA,IAAMG,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC/BxE,yBAAe+D,cAAf,CAA8B,UAACF,GAAD,EAAMG,KAAN,EAAgB;AAC5C,QAAIA,KAAK,GAAG,CAAZ,EAAe;AACbhE,6BAAeyE,IAAf,CAAoB,UAACZ,GAAD,EAAMa,UAAN,EAAqB;AACvC,YAAMvD,OAAO,GAAGwD,oBAAYC,GAAZ,CAAgB,UAAAC,MAAM,EAAI;AACxC,cAAIhE,QAAQ,GAAG6D,UAAU,CAACD,IAAX,CAAgB,UAAAK,CAAC;AAAA,mBAAIA,CAAC,CAACpF,IAAF,IAAUmF,MAAM,CAAChE,QAAP,CAAgBnB,IAA9B;AAAA,WAAjB,CAAf;AACAmF,gBAAM,CAAChE,QAAP,GAAkBA,QAAQ,GAAGA,QAAQ,CAACkE,GAAZ,GAAkB,IAA5C;AACA,iBAAOF,MAAP;AACD,SAJe,CAAhB;;AAMA/D,uBAAOiD,cAAP,CAAsB,UAACF,GAAD,EAAMG,KAAN,EAAgB;AACpC,cAAIA,KAAK,IAAI,CAAb,EAAgB;AACdlD,2BAAOmD,UAAP,CAAkBC,UAAlB,CAA6B/C,OAA7B,EAAsC,UAAC0C,GAAD,EAAMO,IAAN,EAAe;AACnDnB,qBAAO,CAACC,GAAR,qCAAyCkB,IAAI,CAACC,aAA9C;AACD,aAFD;AAGD;AACF,SAND;AAOD,OAdD;AAeD;AACF,GAlBD;AAmBD,CApBM;;;;AAsBA,IAAMW,SAAS,GAAG,SAAZA,SAAY,GAAM;AAC7B1D,eAAKyC,cAAL,CAAoB,UAACF,GAAD,EAAMG,KAAN,EAAgB;AAClC,QAAIA,KAAK,IAAI,CAAb,EAAgB;AACd1C,mBAAK2C,UAAL,CAAgBC,UAAhB,CAA2Be,iBAA3B,EAAqC,UAACpB,GAAD,EAAMO,IAAN,EAAe;AAClDnB,eAAO,CAACC,GAAR,mCAAuCkB,IAAI,CAACC,aAA5C;AACD,OAFD;AAGD;AACF,GAND;AAOD,CARM;;;eAUQ;AACbC,iBAAe,EAAfA,eADa;AAEbR,sBAAoB,EAApBA,oBAFa;AAGbU,aAAW,EAAXA,WAHa;AAIbQ,WAAS,EAATA;AAJa,C;;;;;;;;;;;;;;;;;;;;AC1Df;;AACA;;AAEA,IAAME,MAAM,GAAG,iCAAf;AACA,IAAMC,MAAM,GAAG,IAAIC,iCAAJ,CAAiBF,MAAjB,CAAf;eAEeC,M;;;;;;;;;;;;;;;;;;;;ACNf;;AACA;;AAEA,IAAMD,MAAM,GAAG;AACbG,UAAQ,EAAEC,iBADG;AAEbC,WAAS,EAATA,kBAFa;AAGbC,aAAW,EAAE,qBAACC,KAAD,EAAW;AACtBxC,WAAO,CAACC,GAAR,CAAYwC,IAAI,CAACC,SAAL,CAAeF,KAAf,CAAZ;AACA,WAAOA,KAAP;AACD;AANY,CAAf;;AASA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,SAAOV,MAAP;AACD,CAFD;;eAIeU,c;;;;;;;;;;;;;;;;;;;;AChBf;;AACA;;AAEA,IAAMC,WAAW,GAAG,IAAIC,0BAAJ,CAAsB;AACxCpG,MAAI,EAAE,aADkC;AAExCc,aAAW,EAAE,sCAF2B;AAGxCuF,WAHwC,qBAG9BC,KAH8B,EAGvB;AACf,WAAOA,KAAK,CAACC,WAAN,EAAP;AACD,GALuC;AAMxCC,YANwC,sBAM7BF,KAN6B,EAMtB;AAChB,QAAMG,SAAS,GAAG,IAAIC,IAAJ,CAASJ,KAAT,CAAlB;AACA,WAAOK,KAAK,CAACF,SAAD,CAAL,GAAmBG,SAAnB,GAA+BH,SAAtC;AACD,GATuC;AAUxCI,cAVwC,wBAU3BC,GAV2B,EAUtB;AAChB,QAAIA,GAAG,CAACC,IAAJ,IAAYC,qBAAKC,MAArB,EAA6B;AAC3B,UAAMX,KAAK,GAAG,IAAII,IAAJ,CAASI,GAAG,CAACR,KAAb,CAAd;AACA,aAAOK,KAAK,CAACL,KAAD,CAAL,GAAeM,SAAf,GAA2BN,KAAlC;AACD;AACF;AAfuC,CAAtB,CAApB;eAkBeH,W;;;;;;;;;;;;;;;;;;;;ACrBf;;AACA;;AACA;;AAEA,IAAMN,SAAS,GAAG;AAChBqB,OAAK,EAAEC,iBADS;AAEhBC,UAAQ,EAAEC,kBAFM;AAGhBC,aAAW,EAAEnB;AAHG,CAAlB;eAMeN,S;;;;;;;;;;;;;;;;;;ACVf;;AAEA,IAAM0B,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,QAAuB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;AAC3C1G,aAAW,CAAC2G,IAAZ,CAAiBD,UAAjB;AACA,SAAOA,UAAP;AACD,CAHD;;AAKA,IAAMJ,SAAS,GAAG;AAChBE,eAAa,EAAbA,aADgB;AAEhBI,SAAO,EAAE,iBAACH,CAAD,SAAkB;AAAA,QAAZlB,KAAY,SAAZA,KAAY;AACzB,WAAO,yCAAmBA,KAAnB,CAAP;AACD;AAJe,CAAlB;eAOee,S;;;;;;;;;;;;;;;;;;;;;;;;ACdf;;AACA;;AAEA,IAAMF,OAAO,GAAG;AACdS,MAAI,EAAE;AAAA,WAAM,0CAAN;AAAA,GADQ;AAEdC,kBAAgB;AAAA,0GAAE,iBAAOC,MAAP,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACH3H,sBAAeyE,IAAf,EADG;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KAFF;AAKdhE,aAAW;AAAA,qGAAE,kBAAO+G,MAAP,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACEvG,kBAAWqD,IAAX,EADF;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KALG;AAQdtD,SAAO;AAAA,iGAAE,kBAAOqG,MAAP,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACM7G,cAAO2D,IAAP,GAAcmD,QAAd,CAAuB,UAAvB,CADN;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AARO,CAAhB;eAaef,O;;;;;;;;;;;;;;;;;AChBf,IAAIgB,eAAe,UAAnB;;AAEO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC9B,KAAD,EAAW;AAC3C6B,iBAAe,GAAG7B,KAAlB;AACA,SAAO6B,eAAP;AACD,CAHM;;;;AAKA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AACtC,SAAOF,eAAP;AACD,CAFM;;;eAIQ;AAAEC,oBAAkB,EAAlBA,kBAAF;AAAsBC,oBAAkB,EAAlBA;AAAtB,C;;;;;;;;;;;;;;;;;;;;;;ACXf;;;;;;;;;;;;AAEA,IAAMlD,MAAM,OAAGmD,wBAAH,oBAAZ;eA4BenD,M;;;;;;;;;;;;;;;;;;;;;;AC9Bf;;;;;;;;;;;;AAEA,IAAMoD,cAAc,OAAGD,wBAAH,oBAApB;eAiBeC,c;;;;;;;;;;;;;;;;;;;;;;ACnBf;;;;;;;;;;;;AAEA,IAAMpC,WAAW,OAAGmC,wBAAH,oBAAjB;eAIenC,W;;;;;;;;;;;;;;;;;;;;ACNf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMP,aAAa,GAAG,CAACgC,gBAAD,EAAO3F,gBAAP,EAAasG,0BAAb,EAA6Bd,sBAA7B,EAAyC7H,gBAAzC,EAA+CuF,kBAA/C,EAAuDgB,uBAAvD,CAAtB;eAEeP,a;;;;;;;;;;;;;;;;;;;;;;ACVf;;;;;;;;;;;;AAEA,IAAM6B,UAAU,OAAGa,wBAAH,oBAAhB;eA4Beb,U;;;;;;;;;;;;;;;;;;;;;;AC9Bf;;;;;;;;;;;;AAEA,IAAMxF,IAAI,OAAGqG,wBAAH,oBAAV;eAgBerG,I;;;;;;;;;;;;;;;;;;;;;;AClBf;;;;;;;;;;;;AAEA,IAAM2F,IAAI,OAAGU,wBAAH,oBAAV;eAUeV,I;;;;;;;;;;;;;;;;;;;;;;ACZf;;;;;;;;;;;;AAEA,IAAMhI,IAAI,OAAG0I,wBAAH,oBAAV;eAyBe1I,I;;;;;;;;;;;;;;;;;;;;AC3Bf;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AAEA,IAAM4I,UAAU,GAAG,SAAbA,UAAa,CAAClJ,GAAD,EAAS;AAAA,8BACsDiD,OAAO,CAACuB,GAD9D,CAClB2E,cADkB;AAAA,MAClBA,cADkB,sCACD,kDADC;AAG1BnJ,KAAG,CAACC,GAAJ,CAAQmJ,uBAAWC,IAAX,EAAR;AACArJ,KAAG,CAACC,GAAJ,CAAQmJ,uBAAWE,UAAX,CAAsB;AAAEC,YAAQ,EAAE;AAAZ,GAAtB,CAAR;AACAvJ,KAAG,CAACC,GAAJ,CAAQ,+BAAR;AACAD,KAAG,CAACC,GAAJ,CACE,gCAAQ;AACNuJ,UAAM,EAAEL,cADF;AAENM,UAAM,EAAE,KAFF;AAGNC,qBAAiB,EAAE,IAHb;AAINC,UAAM,EAAE;AAAEC,YAAM,EAAE;AAAV;AAJF,GAAR,CADF;AASA,wBAAK5J,GAAL;AAEAA,KAAG,CAACC,GAAJ,CAAQ,uBAAR;AAEAD,KAAG,CAACC,GAAJ,CAAQ,8BAAR;AAEAD,KAAG,CAACC,GAAJ,CAAQ,yBAAR;AACAD,KAAG,CAACC,GAAJ,CACE4J,mBAAOC,qBAAP,CAA6B;AAC3BC,cAAU,EAAE;AACVC,gBAAU,EAAE,CAAC,QAAD,CADF;AAEVC,eAAS,EAAE,CACT,QADS,EAET,iBAFS,EAGT,kBAHS,EAIT,eAJS,EAKT,sBALS,EAMT,WANS,CAFD;AAUVC,cAAQ,EAAE,CAAC,QAAD,EAAW,iBAAX,EAA8B,sBAA9B,EAAsD,kBAAtD,CAVA;AAWVC,YAAM,EAAE,CAAC,QAAD,EAAW,OAAX,EAAoB,iBAApB,EAAuC,kBAAvC,CAXE;AAYVC,aAAO,EAAE,CAAC,QAAD,EAAW,mBAAX;AAZC;AADe,GAA7B,CADF;AAkBApK,KAAG,CAACC,GAAJ,CAAQ4J,mBAAOQ,cAAP,CAAsB;AAAEC,UAAM,EAAE;AAAV,GAAtB,CAAR,EAxC0B,CA0C1B;;AACAtK,KAAG,CAACC,GAAJ,CAAQsK,8BAAe,SAAf,CAAR,EA3C0B,CA6C1B;;AACApE,qBAAOqE,eAAP,CAAuB;AAAExK,OAAG,EAAHA,GAAF;AAAOyK,QAAI,EAAE;AAAb,GAAvB;;AAEAzK,KAAG,CAACC,GAAJ,CAAQ,YAAR,EAAsB,UAAC4E,GAAD,EAAM6F,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,EAAyB;AAC7CD,OAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyBL,iBAAKM,OAAL,CAAa,SAAb,EAAwB,gBAAxB,CAAzB;AACD,GAFD,EAhD0B,CAoD1B;;AACA/K,KAAG,CAACgL,IAAJ,CAAS,QAAT,EAAmB9K,qBAAS+K,YAAT,CAAsB,OAAtB,CAAnB,EAAmD,UAACC,IAAD,EAAOP,GAAP,EAAe;AAChEA,OAAG,CAACQ,QAAJ,CAAa,MAAb;AACD,GAFD;AAIAnL,KAAG,CAACgL,IAAJ,CAAS,WAAT,EAAsB,UAACN,GAAD,EAAMC,GAAN,EAAc;AAAA,oBACID,GAAG,CAACU,IADR;AAAA,QAC1B5I,QAD0B,aAC1BA,QAD0B;AAAA,QAChBE,KADgB,aAChBA,KADgB;AAAA,QACTD,QADS,aACTA,QADS;;AAElC,QAAME,IAAI,GAAGL,aAAK2C,UAAL,CAAgBoG,OAAhB,CAAwB;AAAE3K,UAAI,EAAE;AAAR,KAAxB,EAA2C,UAACmE,GAAD,EAAMlC,IAAN,EAAe;AACrE,UAAIkC,GAAJ,EAAS,MAAMA,GAAN;;AAET7B,mBAAKsI,QAAL,CAAc;AAAE9I,gBAAQ,EAARA,QAAF;AAAYE,aAAK,EAALA,KAAZ;AAAmBC,YAAI,EAAEA,IAAI,CAACoD;AAA9B,OAAd,EAAmDtD,QAAnD,EAA6D,UAACoC,GAAD,EAAMvE,IAAN,EAAe;AAC1E,YAAIuE,GAAJ,EAAS;AACP,gBAAMA,GAAN;AACD;;AAED3E,6BAAS+K,YAAT,CAAsB,OAAtB,EAA+BP,GAA/B,EAAoCC,GAApC,EAAyC,YAAM;AAC7CA,aAAG,CAACQ,QAAJ,CAAa,GAAb,EAAkB,MAAlB;AACD,SAFD;AAGD,OARD;AASD,KAZY,CAAb;AAaD,GAfD;AAiBAnL,KAAG,CAACC,GAAJ,CAAQ,UAACyK,GAAD,EAAMC,GAAN,EAAWY,KAAX,EAAqB;AAC3BtH,WAAO,CAACC,GAAR,CAAY,QAAQwG,GAAG,CAACD,IAAxB;AACAE,OAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyBL,iBAAKM,OAAL,CAAa,SAAb,EAAwB,gBAAxB,CAAzB;AACD,GAHD;AAKA/K,KAAG,CAACC,GAAJ,CAAQ,UAAC4E,GAAD,EAAMqG,IAAN,EAAYP,GAAZ,EAAiBY,KAAjB,EAA2B;AACjCtH,WAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCW,GAAhC;AACA8F,OAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyBL,iBAAKM,OAAL,CAAa,SAAb,EAAwB,gBAAxB,CAAzB;AACD,GAHD;AAID,CAnFD;;eAqFe7B,U;;;;;;;;;;;;;;;;;ACrGf;;AACA;;AACA;;AAEA,IAAMlJ,GAAG,GAAG,0BAAZ;AAEA,4BAAWA,GAAX;AAEAA,GAAG,CAACwL,MAAJ,CAAW,IAAX,EAAiB,YAAW;AAC1BvH,SAAO,CAACC,GAAR,CAAY,0BAAZ;AACD,CAFD,E;;;;;;;;;;;;;;;;;ACRA;;AAEA,IAAMuH,aAAa,GAAG,SAAhBA,aAAgB,CAAAvL,QAAQ,EAAI;AAChC;AACAA,UAAQ,CAACD,GAAT,CAAa+C,YAAK0I,cAAL,EAAb;AACD,CAHD;;eAKeD,a;;;;;;;;;;;;ACPf,oE;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,0E;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,qC","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server/server.js\");\n","import passport from 'passport';\nimport localStrategy from './strategies/local';\n\nconst auth = (app) => {\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.serializeUser((user, done) => {\n    // null, user.id\n    done(null, user);\n  });\n  passport.deserializeUser((user, done) => {\n    done(null, user);\n  });\n\n  localStrategy(passport);\n};\n\nexport default auth;\n","import mongoose, { Schema } from 'mongoose';\n\nexport const courseCategorySchema = Schema({\n  name: { type: String, required: true, unique: true, index: true },\n});\n\nconst CourseCategory = mongoose.model('CourseCategory', courseCategorySchema, 'CourseCategories');\n\nexport default CourseCategory;\n","import mongoose, { Schema } from 'mongoose';\n\nconst {\n  Types: { ObjectId },\n} = Schema;\n\nexport const courseSchema = Schema({\n  title: { type: String, required: true },\n  description: String,\n  instructors: [{ type: ObjectId, ref: 'Instructor' }],\n  fee: Number,\n  category: { type: ObjectId, ref: 'CourseCategory' },\n});\n\nconst Course = mongoose.model('Course', courseSchema, 'Courses');\n\nexport default Course;\n","import CourseCategory from './course-category';\nimport Instructor from './instructor';\nimport Course from './course';\nimport Role from './role';\nimport User from './user';\n\nexport { CourseCategory, Instructor, Course, Role, User };\n","import mongoose, { Schema } from 'mongoose';\nimport { ObjectId } from 'mongodb';\n\nexport const instructorSchema = Schema({\n  name: { type: String, required: true, unique: true, index: true },\n  photo: String,\n  excerpt: String,\n  bio: String,\n  courses: [{ type: ObjectId, ref: 'Course' }],\n});\n\nconst Instructor = mongoose.model('Instructor', instructorSchema, 'Instructors');\n\nexport default Instructor;\n","import mongoose, { Schema } from 'mongoose';\n\nexport const roleSchema = Schema({\n  name: { type: String, required: true, unique: true, index: true },\n});\n\nconst Role = mongoose.model('Role', roleSchema, 'Roles');\n\nexport default Role;\n","import mongoose, { Schema } from 'mongoose';\nimport passportLocalMongoose from 'passport-local-mongoose';\n\nconst {\n  Types: { ObjectId },\n} = Schema;\n\nexport const userSchema = Schema({\n  username: { type: String, required: true, unique: true, index: true },\n  password: { type: String, required: true },\n  email: { type: String, required: true, unique: true, index: true },\n  role: { type: ObjectId, ref: 'Role', required: true },\n  active: { type: Boolean, default: true },\n});\n\nuserSchema.plugin(passportLocalMongoose);\n\nconst User = mongoose.model('User', userSchema, 'Users');\n\nexport default User;\n","import mongoose from 'mongoose';\nimport readline from 'readline';\nimport { initInstructors, initCourses, initCourseCategories, initRoles } from './scipts/seeder';\n\nif (process.platform === 'win32') {\n  const rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout,\n  });\n  rl.on('SIGINT', () => {\n    process.emit('SIGINT');\n  });\n}\n\nconst gracefulShutdown = (msg, callback) => {\n  mongoose.connection.close(() => {\n    console.log(`Mongoose disconnected through ${msg}`);\n    callback();\n  });\n};\n\nprocess.once('SIGUSR2', () => {\n  gracefulShutdown('nodemon restart', () => {\n    process.kill(process.pid, 'SIGUSR2');\n  });\n});\n\nprocess.on('SIGINT', () => {\n  gracefulShutdown('app termination', () => {\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGTERM', () => {\n  gracefulShutdown('Heroku app shutdown', () => {\n    process.exit(0);\n  });\n});\n\nconst conn = process.env.MONGODB_URL || 'mongodb://localhost/pcci';\n\nmongoose.connect(conn, { useNewUrlParser: true, useUnifiedTopology: true });\n\nmongoose.connection.on('connected', () => console.log(`Mongoose connected to ${conn}`));\n\nmongoose.connection.on('error', err => console.log('Mongoose connection error:', err));\n\nmongoose.connection.on('disconnected', () => console.log('Mongoose disconnected'));\n\nmongoose.connection.once('open', () => {\n  console.log('Connection Successful!');\n\n  initCourseCategories();\n  initInstructors();\n  initCourses();\n  initRoles();\n});\n","import { CourseCategory, Instructor, Course, Role, User } from '../models';\nimport courseCategoriesData from '../data/course-categories.json';\nimport instructorsData from '../data/instructors.json';\nimport coursesData from '../data/courses.json';\nimport roleData from '../data/roles.json';\n\nexport const initCourseCategories = () => {\n  CourseCategory.countDocuments((err, count) => {\n    if (count == 0) {\n      CourseCategory.collection.insertMany(courseCategoriesData, (err, docs) =>\n        console.log(`CourseCategoriess seeded. Inserted: ${docs.insertedCount}`)\n      );\n    }\n  });\n};\n\nexport const initInstructors = () => {\n  Instructor.countDocuments((err, count) => {\n    if (count == 0) {\n      Instructor.collection.insertMany(instructorsData, (err, docs) =>\n        console.log(`Instructors seeded. Inserted: ${docs.insertedCount}`)\n      );\n    }\n  });\n};\n\nexport const initCourses = () => {\n  CourseCategory.countDocuments((err, count) => {\n    if (count > 0) {\n      CourseCategory.find((err, categories) => {\n        const courses = coursesData.map(course => {\n          let category = categories.find(c => c.name == course.category.name);\n          course.category = category ? category._id : null;\n          return course;\n        });\n\n        Course.countDocuments((err, count) => {\n          if (count == 0) {\n            Course.collection.insertMany(courses, (err, docs) => {\n              console.log(`Courses seeded. Inserted: ${docs.insertedCount}`);\n            });\n          }\n        });\n      });\n    }\n  });\n};\n\nexport const initRoles = () => {\n  Role.countDocuments((err, count) => {\n    if (count == 0) {\n      Role.collection.insertMany(roleData, (err, docs) => {\n        console.log(`Roles seeded. Inserted: ${docs.insertedCount}`);\n      });\n    }\n  });\n};\n\nexport default {\n  initInstructors,\n  initCourseCategories,\n  initCourses,\n  initRoles,\n};\n","import { ApolloServer } from 'apollo-server-express';\nimport configProvider from './configProvider';\n\nconst config = configProvider();\nconst server = new ApolloServer(config);\n\nexport default server;\n","import typeDefsArray from './schema/index';\nimport resolvers from './resolvers/index';\n\nconst config = {\n  typeDefs: typeDefsArray,\n  resolvers,\n  formatError: (error) => {\n    console.log(JSON.stringify(error));\n    return error;\n  },\n};\n\nconst configProvider = () => {\n  return config;\n};\n\nexport default configProvider;\n","import { GraphQLScalarType } from 'graphql';\nimport Kind from 'graphql/language';\n\nconst graphQLDate = new GraphQLScalarType({\n  name: 'GraphQLDate',\n  description: 'A Date() type in GraphQL as a scalar',\n  serialize(value) {\n    return value.toISOString();\n  },\n  parseValue(value) {\n    const dateValue = new Date(value);\n    return isNaN(dateValue) ? undefined : dateValue;\n  },\n  parseLiteral(ast) {\n    if (ast.kind == Kind.STRING) {\n      const value = new Date(ast.value);\n      return isNaN(value) ? undefined : value;\n    }\n  },\n});\n\nexport default graphQLDate;\n","import queries from './queries/index';\nimport mutations from './mutations/index';\nimport graphQLDate from './graphQLDate';\n\nconst resolvers = {\n  Query: queries,\n  Mutation: mutations,\n  GraphQLDate: graphQLDate,\n};\n\nexport default resolvers;\n","import { setRootValueHolder } from '../rootValueHolder';\n\nconst addInstructor = (_, { instructor }) => {\n  instructors.push(instructor);\n  return instructor;\n};\n\nconst mutations = {\n  addInstructor,\n  addRoot: (_, { value }) => {\n    return setRootValueHolder(value);\n  },\n};\n\nexport default mutations;\n","import { CourseCategory, Instructor, Course } from '../../../db/models/index';\nimport { getRootValueHolder } from '../rootValueHolder';\n\nconst queries = {\n  root: () => getRootValueHolder(),\n  courseCategories: async (parent, args, context, info) => {\n    return await CourseCategory.find();\n  },\n  instructors: async (parent, args, context, info) => {\n    return await Instructor.find();\n  },\n  courses: async (parent, args, context, info) => {\n    return await Course.find().populate('category');\n  },\n};\n\nexport default queries;\n","let rootValueHolder = `Hello`;\n\nexport const setRootValueHolder = (value) => {\n  rootValueHolder = value;\n  return rootValueHolder;\n};\n\nexport const getRootValueHolder = () => {\n  return rootValueHolder;\n};\n\nexport default { setRootValueHolder, getRootValueHolder };\n","import { gql } from 'apollo-server-express';\n\nconst course = gql`\n  input CourseInput {\n    title: String!\n    description: String!\n    instructors: [ID!]!\n    fee: Float\n    category: ID\n  }\n\n  type Course {\n    _id: ID!\n    title: String!\n    description: String!\n    instructors: [Instructor!]!\n    fee: Float\n    category: CourseCategory!\n  }\n\n  extend type Query {\n    courses: [Course]\n  }\n\n  extend type Mutation {\n    addCourse(course: CourseInput!): Course!\n    updateCourse(_id: ID!, course: CourseInput!): Course!\n  }\n`;\n\nexport default course;\n","import { gql } from 'apollo-server-express';\n\nconst courseCategory = gql`\n  type CourseCategory {\n    _id: ID!\n    name: String!\n  }\n\n  extend type Query {\n    courseCategories: [CourseCategory]\n    courseCategory(id: ID!): CourseCategory\n  }\n\n  extend type Mutation {\n    addCourseCategory(name: String!): CourseCategory!\n    updateCoureCategory(_id: ID!, name: String!): CourseCategory!\n  }\n`;\n\nexport default courseCategory;\n","import { gql } from 'apollo-server-express';\n\nconst graphQLDate = gql`\n  scalar GraphQLDate\n`;\n\nexport default graphQLDate;\n","import course from './course';\nimport courseCategory from './courseCategory';\nimport instructor from './instructor';\nimport role from './role';\nimport root from './root';\nimport user from './user';\nimport graphQLDate from './graphQLDate';\n\nconst typeDefsArray = [root, role, courseCategory, instructor, user, course, graphQLDate];\n\nexport default typeDefsArray;\n","import { gql } from 'apollo-server-express';\n\nconst instructor = gql`\n  input InstructorInput {\n    name: String!\n    photo: String\n    excerpt: String\n    bio: String\n    courses: [ID!]!\n  }\n\n  type Instructor {\n    _id: ID!\n    name: String!\n    photo: String\n    excerpt: String\n    bio: String\n    courses: [Course!]!\n  }\n\n  extend type Query {\n    instructors: [Instructor]\n  }\n\n  extend type Mutation {\n    addInstructor(instructor: InstructorInput!): Instructor!\n    updateInstructor(_id: ID!, instructor: InstructorInput!): Instructor!\n  }\n`;\n\nexport default instructor;\n","import { gql } from 'apollo-server-express';\n\nconst role = gql`\n  type Role {\n    _id: ID!\n    name: String!\n  }\n\n  extend type Query {\n    roles: [Role]\n  }\n\n  extend type Mutation {\n    addRole(name: String): Role!\n    updateRole(_id: ID!, name: String): Role\n  }\n`;\n\nexport default role;\n","import { gql } from 'apollo-server-express';\n\nconst root = gql`\n  type Query {\n    root: String\n  }\n\n  type Mutation {\n    addRoot(value: String!): String\n  }\n`;\n\nexport default root;\n","import { gql } from 'apollo-server-express';\n\nconst user = gql`\n  input UserInput {\n    username: String\n    password: String\n    email: String\n  }\n\n  type User {\n    _id: ID!\n    username: String!\n    password: String!\n    email: String!\n    roles: [Role!]!\n  }\n\n  extend type Query {\n    users: [User]\n  }\n\n  extend type Mutation {\n    addUser(user: UserInput!): User!\n    updateUser(_id: ID!, user: UserInput!): User!\n  }\n`;\n\nexport default user;\n","import path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport session from 'express-session';\n\nimport cors from 'cors';\nimport compress from 'compression';\nimport helmet from 'helmet';\n\nimport passport from 'passport';\n\nimport server from './graphql/apollo';\nimport auth from './auth';\nimport { User, Role } from './db/models';\n\nconst middleware = (app) => {\n  const { SESSION_SECRET = 'For the gentle wind does move Silently invisibly' } = process.env;\n\n  app.use(bodyParser.json());\n  app.use(bodyParser.urlencoded({ extended: false }));\n  app.use(cookieParser());\n  app.use(\n    session({\n      secret: SESSION_SECRET,\n      resave: false,\n      saveUninitialized: true,\n      cookie: { secure: true },\n    })\n  );\n\n  auth(app);\n\n  app.use(cors());\n\n  app.use(compress());\n\n  app.use(helmet());\n  app.use(\n    helmet.contentSecurityPolicy({\n      directives: {\n        defaultSrc: [\"'self'\"],\n        scriptSrc: [\n          \"'self'\",\n          \"'unsafe-inline'\",\n          'cdn.jsdelivr.net',\n          \"'unsafe-eval'\",\n          'identity.netlify.com',\n          'unpkg.com',\n        ],\n        styleSrc: [\"'self'\", \"'unsafe-inline'\", 'fonts.googleapis.com', 'cdn.jsdelivr.net'],\n        imgSrc: [\"'self'\", 'data:', '*.amazonaws.com', 'cdn.jsdelivr.net'],\n        fontSrc: [\"'self'\", 'fonts.gstatic.com'],\n      },\n    })\n  );\n  app.use(helmet.referrerPolicy({ policy: 'same-origin' }));\n\n  // serve static files before gatsbyExpress\n  app.use(express.static('public/'));\n\n  // Apollo\n  server.applyMiddleware({ app, path: '/graphql' });\n\n  app.use('/app/:path', (err, req, res, next) => {\n    res.status(200).sendFile(path.resolve('public/', 'app/index.html'));\n  });\n\n  // Login\n  app.post('/login', passport.authenticate('local'), (_req, res) => {\n    res.redirect('/app');\n  });\n\n  app.post('/register', (req, res) => {\n    const { username, email, password } = req.body;\n    const role = Role.collection.findOne({ name: 'Guest' }, (err, role) => {\n      if (err) throw err;\n\n      User.register({ username, email, role: role._id }, password, (err, user) => {\n        if (err) {\n          throw err;\n        }\n\n        passport.authenticate('local')(req, res, () => {\n          res.redirect(302, '/app');\n        });\n      });\n    });\n  });\n\n  app.use((req, res, _next) => {\n    console.log('req' + req.path);\n    res.status(404).sendFile(path.resolve('public/', '404/index.html'));\n  });\n\n  app.use((err, _req, res, _next) => {\n    console.log('Error occurred: ', err);\n    res.status(500).sendFile(path.resolve('public/', '500/index.html'));\n  });\n};\n\nexport default middleware;\n","import express from 'express';\nimport middleware from './middleware';\nimport './db/mongodb';\n\nconst app = express();\n\nmiddleware(app);\n\napp.listen(3000, function() {\n  console.log('App started on port 3000');\n});\n","import { User } from '../db/models/index';\n\nconst localStrategy = passport => {\n  // Creates a user based on the posted form\n  passport.use(User.createStrategy());\n};\n\nexport default localStrategy;\n","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");","module.exports = require(\"@babel/runtime/helpers/interopRequireWildcard\");","module.exports = require(\"@babel/runtime/helpers/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"apollo-server-express\");","module.exports = require(\"body-parser\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"express-session\");","module.exports = require(\"graphql\");","module.exports = require(\"graphql/language\");","module.exports = require(\"helmet\");","module.exports = require(\"mongodb\");","module.exports = require(\"mongoose\");","module.exports = require(\"passport\");","module.exports = require(\"passport-local-mongoose\");","module.exports = require(\"path\");","module.exports = require(\"readline\");"],"sourceRoot":""}